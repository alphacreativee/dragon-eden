import{preloadImages}from"../../libs/utils.js";function magicCursor(){if(!($(window).width()<1024)){var a=document.querySelector(".magic-cursor");gsap.set(a,{xPercent:-50,yPercent:-50});let t,o;window.addEventListener("mousemove",e=>{t=e.clientX,o=e.clientY,gsap.to(a,{x:t,y:o,duration:.1})});var e=document.querySelectorAll(".modal, [data-cursor-text]"),i=document.querySelector(".magic-cursor .cursor"),s=document.querySelector(".magic-cursor .cursor .text");e.forEach(t=>{t.addEventListener("mouseenter",()=>{let e="";e=t.classList.contains("modal")?"Đóng":t.getAttribute("data-cursor-text"),s.innerHTML=`<span class="color-white">${e}</span>`,i.classList.add("show-text")}),t.addEventListener("mouseleave",()=>{s.innerHTML="",i.classList.remove("show-text")})}),document.querySelectorAll(".modal-dialog").forEach(e=>{e.addEventListener("mouseenter",()=>{i.classList.remove("show-text")}),e.addEventListener("mouseleave",()=>{s.innerHTML='<span class="color-white">Đóng</span>',i.classList.add("show-text")})})}}function sectionOverview(){$("section.overview").length<1||$(".overview-switcher .toggle-checkbox").on("change",function(){var e=$(this).is(":checked")?"dark":"light";$(".overview-main__item").removeClass("active"),$(".overview-main__"+e).addClass("active")})}function loading(){let e=document.querySelector(".loading");var t,o;e&&(t=gsap.timeline({defaults:{ease:"none"}}),o=document.querySelectorAll(".logo-name"),gsap.set(".logo-image",{opacity:0}),gsap.set(o,{opacity:0}),gsap.set(".logo-slogan",{opacity:0}),t.to(".logo-image",{opacity:1,duration:.5}).to(o,{opacity:1,stagger:.06,duration:.6},">-=0.1").to(".logo-slogan",{opacity:1,duration:.4},">").to(".loading",{clipPath:"inset(0% 0% 0% 100%)",duration:1,onComplete:()=>e.classList.add("d-none")}))}function popupIntruction(){let t=$(".intruction");if(t.length){var c=t.find(".icon-close"),n=t.find(".title");let e=t.find(".action").not(".action-2"),o=t.find(".action-2");var r=t.find(".desc").not(".desc-2"),l=t.find(".desc-2"),d=t.hasClass("popup-intruction");let a=null,i=(n.length&&(a=new SplitText(n,{type:"words, chars"})),[]),s=(r.each(function(){i.push(new SplitText($(this),{type:"words, chars"}))}),[]);l.each(function(){s.push(new SplitText($(this),{type:"words, chars"}))}),a&&gsap.set(a.chars,{opacity:0}),i.forEach(e=>gsap.set(e.chars,{opacity:0})),s.forEach(e=>gsap.set(e.chars,{opacity:0})),gsap.set(e,{opacity:0}),gsap.set(o,{opacity:0});n=d?3300:1800;setTimeout(()=>{t.addClass("open")},n-800),setTimeout(()=>{let t=gsap.timeline();a&&t.to(a.chars,{opacity:1,duration:1,stagger:1/a.chars.length,ease:"power2.out"}),e.length&&t.to(e,{opacity:1,duration:.6,ease:"power2.out"}),i.forEach(e=>{t.to(e.chars,{opacity:1,duration:2,stagger:2/e.chars.length,ease:"power1.out"})}),o.length&&t.to(o,{opacity:1,duration:.6,ease:"power2.out"}),s.forEach(e=>{t.to(e.chars,{opacity:1,duration:2,stagger:2/e.chars.length,ease:"power1.out"})})},n),c.on("click",function(){t.removeClass("open")})}}function sectionGallery(){if(!($(".gallery").length<1)){let o=null;function t(){o&&(o.destroy(),o=null);var e,t=document.querySelector(".tab-pane.active.show");t&&(e=`#${t.id} .glightbox`,t.querySelector(".glightbox"))&&(o=GLightbox({selector:e,loop:!0,touchNavigation:!0,autoplayVideos:!0}))}t(),document.querySelectorAll('[data-bs-toggle="tab"]').forEach(e=>{e.addEventListener("shown.bs.tab",function(){t()})})}}function sectionFacilities(){let t=document.querySelector(".facilities");if(t){let s=t.querySelectorAll(".image img"),c=t.querySelectorAll(".facilities-wrapper .image"),n=t.querySelectorAll(".facilities-wrapper .item-360"),o=t.querySelectorAll(".facilities-tabs.desktop .tab-item"),r=t.querySelector(".tooltips"),l=t.querySelectorAll(".tooltip-area");if(o.forEach(e=>e.classList.remove("active")),(e=t.querySelector('.tab-item[data-tab="all"]'))&&e.classList.add("active"),s.forEach(e=>e.classList.toggle("active","all"===e.dataset.tab)),n.forEach(e=>e.classList.add("d-none")),c.forEach(e=>e.classList.remove("d-none")),l.forEach(e=>e.classList.remove("hide")),r&&r.classList.remove("hide"),991<window.innerWidth&&o.forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.tab;o.forEach(e=>e.classList.remove("active")),e.classList.add("active"),d(t)||(n.forEach(e=>e.classList.add("d-none")),c.forEach(e=>e.classList.remove("d-none")),"all"===t?(s.forEach(e=>e.classList.toggle("active","all"===e.dataset.tab)),l.forEach(e=>e.classList.remove("hide")),r&&r.classList.remove("hide")):(s.forEach(e=>e.classList.toggle("active",e.dataset.tab===t)),l.forEach(e=>e.classList.toggle("hide",e.dataset.tab!==t)),r&&r.classList.add("hide")))})}),window.innerWidth<992){var e=t.querySelector(".facilities-tabs.mobile");if(e){let a=e.querySelectorAll(".dropdown-custom-item"),i=e.querySelector(".dropdown-custom-text");a.forEach(e=>{e.addEventListener("click",function(e){var t=this.querySelector("span[data-tab]");let o=(t||this).dataset.tab;o&&(a.forEach(e=>e.classList.remove("active")),this.classList.add("active"),i&&(t=(t||this).textContent.trim(),i.textContent=t),d(o)||(n.forEach(e=>e.classList.add("d-none")),c.forEach(e=>e.classList.remove("d-none")),"all"===o?(s.forEach(e=>e.classList.toggle("active","all"===e.dataset.tab)),l.forEach(e=>e.classList.remove("hide")),r&&r.classList.remove("hide")):(s.forEach(e=>e.classList.toggle("active",e.dataset.tab===o)),l.forEach(e=>e.classList.toggle("hide",e.dataset.tab!==o)),r&&r.classList.add("hide"))))})})}}function d(e){e=t.querySelector(`.facilities-wrapper .item-360[data-tab="${e}"]`);return!!e&&(n.forEach(e=>e.classList.add("d-none")),e.classList.remove("d-none"),c.forEach(e=>e.classList.add("d-none")),l.forEach(e=>e.classList.add("hide")),r&&r.classList.add("hide"),!0)}}}function updateImageWidth(){var e=window.innerWidth;let o=window.innerHeight-69;992<e||document.querySelectorAll(".facilities .image, .location-wrapper .image").forEach(e=>{var t=o*(2160/1111);e.style.height=o+"px",e.style.width=t+"px"})}function customDropdown(){let e=document.querySelectorAll(".dropdown-custom");function n(a){e.forEach(e=>{var t=e.querySelector(".dropdown-custom-menu"),o=e.querySelector(".dropdown-custom-btn");a&&e===a||(t.classList.remove("dropdown--active"),o.classList.remove("--active"))})}e.forEach(s=>{let t=s.querySelector(".dropdown-custom-btn"),o=s.querySelector(".dropdown-custom-menu");var e=s.querySelectorAll(".dropdown-custom-item");let c=s.querySelector(".value-select");t.addEventListener("click",function(e){e.stopPropagation(),n(s),o.classList.toggle("dropdown--active"),t.classList.toggle("--active")}),document.addEventListener("click",function(){n()}),e.forEach(i=>{i.addEventListener("click",function(e){e.stopPropagation();var t,e=null!==s.closest(".section-model"),o=i.querySelector("span")?.textContent.trim()||"",a=i.dataset.tab||"";e?((e=c.querySelector("span"))&&(e.textContent=o),a&&(c.dataset.tab=a)):(o=(e=c.querySelector("img"))?e.src:"",a=c.querySelector("span")?.textContent.trim()||"",e=c.innerHTML,t=i.innerHTML,c.innerHTML=t,"Time"!==a&&(i.innerHTML=o?`<img src="${o}" alt="" /><span>${a}</span>`:e)),n()})}),window.addEventListener("scroll",function(){o.closest(".header-lang")&&(o.classList.remove("dropdown--active"),t.classList.remove("--active"))})})}function sectionModel(){$(".section-model").length<1||$(".dropdown-custom-item").on("click",function(){var e=$(this).find("span");e.length&&(e=e.data("tab"),(e=$(`[data-bs-target="#${e}"]`)).length)&&new bootstrap.Tab(e[0]).show()})}$=jQuery,document.addEventListener("DOMContentLoaded",sectionModel);let init=()=>{gsap.registerPlugin(ScrollTrigger),magicCursor(),sectionOverview(),loading(),popupIntruction(),sectionGallery(),sectionFacilities(),updateImageWidth(),customDropdown()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0)}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});