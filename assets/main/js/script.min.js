import{preloadImages}from"../../libs/utils.js";function magicCursor(){if(!($(window).width<1024)){var i=document.querySelector(".magic-cursor");gsap.set(i,{xPercent:-50,yPercent:-50});let t,o;window.addEventListener("mousemove",e=>{t=e.clientX,o=e.clientY,gsap.to(i,{x:t,y:o,duration:.1})});var e=document.querySelectorAll(".modal, [data-cursor-text]"),n=document.querySelector(".magic-cursor .cursor"),s=document.querySelector(".magic-cursor .cursor .text");e.forEach(t=>{t.addEventListener("mouseenter",()=>{let e="";e=t.classList.contains("modal")?"Đóng":t.getAttribute("data-cursor-text"),s.innerHTML=`<span class="color-white">${e}</span>`,n.classList.add("show-text")}),t.addEventListener("mouseleave",()=>{s.innerHTML="",n.classList.remove("show-text")})}),document.querySelectorAll(".modal-dialog").forEach(e=>{e.addEventListener("mouseenter",()=>{n.classList.remove("show-text")}),e.addEventListener("mouseleave",()=>{s.innerHTML='<span class="color-white">Đóng</span>',n.classList.add("show-text")})})}}function sectionOverview(){$("section.overview").length<1||$(".overview-switcher .toggle-checkbox").on("change",function(){var e=$(this).is(":checked")?"dark":"light";$(".overview-main__item").removeClass("active"),$(".overview-main__"+e).addClass("active")})}function loading(){if(document.querySelector(".loading")){let t=document.getElementById("logo"),o=document.querySelector(".loading");var e={mobile:window.innerHeight-115,desktop:window.innerHeight-173},i={mobile:3,desktop:145/28};gsap.set(t,{y:window.innerWidth<991?e.mobile:e.desktop,scale:window.innerWidth<1024?i.mobile:i.desktop}),gsap.set(o,{"--after-height":"0px"}),gsap.to(t,{y:0,duration:2,ease:"expo.in",onUpdate:function(){var e=t.getBoundingClientRect().top,e=window.innerHeight-e+15;gsap.set(o,{"--after-height":e+"px"})},onComplete:()=>{gsap.to(t,{scale:1,duration:1,ease:"expo.in",onComplete:()=>{document.querySelector(".loading").classList.add("loaded")}})}})}}function popupIntruction(){if(!($(".intruction").length<1)){var t=$(".intruction .icon-close");let e=$(".intruction");setTimeout(()=>{e.addClass("open")},2e3),t.on("click",function(){e.removeClass("open")})}}function sectionGallery(){GLightbox({selector:".glightbox",loop:!0,touchNavigation:!0,autoplayVideos:!0})}$=jQuery;let init=()=>{gsap.registerPlugin(ScrollTrigger),magicCursor(),sectionOverview(),popupIntruction(),sectionGallery()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0,console.log("1"))}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});