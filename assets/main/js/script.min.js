import{preloadImages}from"../../libs/utils.js";function magicCursor(){if(!($(window).width<1024)){var i=document.querySelector(".magic-cursor");gsap.set(i,{xPercent:-50,yPercent:-50});let t,o;window.addEventListener("mousemove",e=>{t=e.clientX,o=e.clientY,gsap.to(i,{x:t,y:o,duration:.1})});var e=document.querySelectorAll(".modal, [data-cursor-text]"),a=document.querySelector(".magic-cursor .cursor"),n=document.querySelector(".magic-cursor .cursor .text");e.forEach(t=>{t.addEventListener("mouseenter",()=>{let e="";e=t.classList.contains("modal")?"Đóng":t.getAttribute("data-cursor-text"),n.innerHTML=`<span class="color-white">${e}</span>`,a.classList.add("show-text")}),t.addEventListener("mouseleave",()=>{n.innerHTML="",a.classList.remove("show-text")})}),document.querySelectorAll(".modal-dialog").forEach(e=>{e.addEventListener("mouseenter",()=>{a.classList.remove("show-text")}),e.addEventListener("mouseleave",()=>{n.innerHTML='<span class="color-white">Đóng</span>',a.classList.add("show-text")})})}}function sectionOverview(){$("section.overview").length<1||$(".overview-switcher .toggle-checkbox").on("change",function(){var e=$(this).is(":checked")?"dark":"light";$(".overview-main__item").removeClass("active"),$(".overview-main__"+e).addClass("active")})}function loading(){let e=document.querySelector(".loading");var t,o;e&&(t=gsap.timeline({defaults:{ease:"none"}}),o=document.querySelectorAll(".logo-name"),gsap.set(".logo-image",{opacity:0}),gsap.set(o,{opacity:0}),gsap.set(".logo-slogan",{opacity:0}),t.to(".logo-image",{opacity:1,duration:.5}).to(o,{opacity:1,stagger:.06,duration:.6},">-=0.1").to(".logo-slogan",{opacity:1,duration:.4},">").to(".loading",{clipPath:"inset(0% 0% 0% 100%)",duration:1,onComplete:()=>e.classList.add("d-none")}))}function popupIntruction(){if(!($(".intruction").length<1)){var t=$(".intruction .icon-close");let e=$(".intruction");setTimeout(()=>{e.addClass("open")},3e3),t.on("click",function(){e.removeClass("open")})}}function sectionGallery(){if(!($(".gallery").length<1)){let o=null;function t(){o&&(o.destroy(),o=null);var e,t=document.querySelector(".tab-pane.active.show");t&&(e=`#${t.id} .glightbox`,t.querySelector(".glightbox"))&&(o=GLightbox({selector:e,loop:!0,touchNavigation:!0,autoplayVideos:!0}))}t(),document.querySelectorAll('[data-bs-toggle="tab"]').forEach(e=>{e.addEventListener("shown.bs.tab",function(){t()})})}}function sectionFacilities(){let i=document.querySelector(".facilities");if(i){let r=i.querySelector("svg"),s=i.querySelector(".tooltips");if(r&&s){let o=i.querySelectorAll(".facilities-tabs .tab-item");o.forEach(e=>{e.addEventListener("mouseenter",function(){t(e.getAttribute("data-tab"))})});r.querySelectorAll(".area").forEach(e=>{e.addEventListener("mouseenter",function(){t(e.getAttribute("data-tab"))})});var e=r.querySelectorAll(".dot");let n=r.getBoundingClientRect();function t(e){o.forEach(e=>e.classList.remove("active"));var t=i.querySelector(`.tab-item[data-tab='${e}']`);t&&t.classList.add("active"),i.querySelectorAll("svg .area").forEach(e=>e.classList.add("hide")),"all"!==e&&(t=i.querySelector(`svg .area[data-tab='${e}']`))&&t.classList.remove("hide")}s.innerHTML="",e.forEach(e=>{var t=e.getBBox(),o=t.x+t.width/2,t=t.y,i=document.createElement("div"),e=(i.className="tooltip-area",i.innerHTML=e.dataset.text,e.dataset.heightLine?parseInt(e.dataset.heightLine,10):70),a=(i.style.setProperty("--line-height",e+"px"),r.createSVGPoint()),o=(a.x=o,a.y=t,a.matrixTransform(r.getScreenCTM()));i.style.left=o.x-n.left+"px",i.style.top=o.y-n.top-(e+10)+"px",s.appendChild(i)})}}}$=jQuery;let init=()=>{gsap.registerPlugin(ScrollTrigger),magicCursor(),sectionOverview(),loading(),popupIntruction(),sectionGallery(),sectionFacilities()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0)}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});